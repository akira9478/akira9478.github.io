<html>
    <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>羽球計分</title>
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@mdi/font@6.x/css/materialdesignicons.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/vuetify@3.7.16/dist/vuetify.min.css" rel="stylesheet">
    <style>
      /* 基礎容器樣式 */
      .app-container {
        max-width: 100vw;
        min-height: 100vh;
      }
      
      .main-card {
        width: 100%;
        min-height: 90vh;
      }
      
      .card-title {
        font-size: clamp(20px, 5vw, 28px);
      }
      
      /* 球場樣式 */
      .court-title {
        font-size: clamp(18px, 4vw, 24px);
        font-weight: bold;
      }
      
      .court-container {
        display: inline-block;
        border: 4px solid #fff;
        width: 90vw;
        max-width: 500px;
        height: 60vw;
        max-height: 350px;
        position: relative;
        background: linear-gradient(135deg, #2e7d32 0%, #4caf50 100%);
        box-shadow: 0 4px 8px rgba(0,0,0,0.3);
      }
      
      /* 球場線條 */
      .court-outer-line {
        position: absolute;
        top: 15px;
        left: 15px;
        right: 15px;
        bottom: 15px;
        border: 3px solid #fff;
      }
      
      .court-inner-line {
        position: absolute;
        top: 15px;
        left: 35px;
        right: 35px;
        bottom: 15px;
        border: 2px solid #fff;
      }
      
      .court-net {
        position: absolute;
        left: 50%;
        top: 15px;
        bottom: 15px;
        width: 4px;
        background: #fff;
        box-shadow: 2px 0 4px rgba(0,0,0,0.3);
      }
      
      .court-net-post {
        position: absolute;
        left: calc(50% - 8px);
        width: 16px;
        height: 20px;
        background: #333;
        border-radius: 2px;
      }
      
      .court-net-post.top {
        top: 5px;
      }
      
      .court-net-post.bottom {
        bottom: 5px;
      }
      
      .court-center-line {
        position: absolute;
        top: 50%;
        left: 15px;
        right: 15px;
        height: 2px;
        background: #fff;
      }
      
      .court-service-line {
        position: absolute;
        top: 15px;
        bottom: 15px;
        width: 2px;
        background: #fff;
      }
      
      .court-service-line.left {
        left: 25%;
      }
      
      .court-service-line.right {
        left: 75%;
      }
      
      /* 隊伍標示 */
      .team-label {
        position: absolute;
        top: 50%;
        color: white;
        font-weight: bold;
        text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
        font-size: clamp(14px, 3vw, 18px);
      }
      
      .team-label.left {
        left: 2px;
        transform: translateY(-50%) rotate(-90deg);
      }
      
      .team-label.right {
        right: 2px;
        transform: translateY(-50%) rotate(90deg);
      }
      
      /* 發球區域 */
      .serve-area {
        position: absolute;
        width: 42%;
        height: 42%;
        border: 1px solid rgba(255,255,255,0.5);
        border-radius: 4px;
        opacity: 0.8;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      
      .serve-area.left-top {
        left: 8%;
        top: 8%;
      }
      
      .serve-area.left-bottom {
        left: 8%;
        bottom: 8%;
      }
      
      .serve-area.right-top {
        right: 8%;
        top: 8%;
      }
      
      .serve-area.right-bottom {
        right: 8%;
        bottom: 8%;
      }
      
      .serve-text {
        color: white;
        font-weight: bold;
        text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
        font-size: clamp(16px, 4vw, 24px);
      }
      
      /* 計分區域 */
      .team-name {
        font-size: clamp(20px, 5vw, 32px);
        font-weight: bold;
      }
      
      .team-name.left {
        color: blue;
      }
      
      .team-name.right {
        color: red;
      }
      
      .score-display {
        font-size: clamp(60px, 15vw, 120px);
        font-weight: bold;
        line-height: 1;
      }
      
      .score-display.left {
        color: blue;
      }
      
      .score-display.right {
        color: red;
      }
      
      /* 按鈕樣式 */
      .score-button {
        min-width: clamp(80px, 20vw, 120px) !important;
        height: clamp(80px, 20vw, 120px) !important;
        font-size: clamp(32px, 8vw, 48px) !important;
        font-weight: bold !important;
      }
      
      .reset-button {
        height: clamp(50px, 12vw, 70px) !important;
        font-size: clamp(16px, 4vw, 20px) !important;
      }
      
      .reset-icon {
        font-size: clamp(20px, 5vw, 28px) !important;
      }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1/dayjs.min.js"></script>
    <script type="importmap">
    {
      "imports": {
        "vue": "https://cdn.jsdelivr.net/npm/vue@latest/dist/vue.esm-browser.js",
        "vuetify": "https://cdn.jsdelivr.net/npm/vuetify@3.7.16/dist/vuetify-labs.esm.js"
      }
    }
    </script>
  </head>
  <body>
    <div id="app">
      <v-app>
        <v-app-bar :elevation="2">
          <v-app-bar-title>羽球場</v-app-bar-title>
        </v-app-bar>
        <v-main>
          <v-container fluid class="pa-1 app-container">
            <v-row justify="center" class="fill-height">
              <v-col cols="12" style="max-width: 95vw;">
                <v-card elevation="4" class="main-card">
                  <v-card-title class="text-center pa-3 card-title">羽球計分</v-card-title>
                  <v-card-text class="pa-2">
                    <!-- 上半部：球場圖 -->
                    <v-row>
                      <v-col cols="12" class="text-center pa-1">
                        <div class="mb-2 court-title">發球位置</div>
                        <div class="court-container">
                          
                          <!-- 球場外框線 (雙打界線) -->
                          <div class="court-outer-line"></div>
                          
                          <!-- 單打側界線 (內框) -->
                          <div class="court-inner-line"></div>
                          
                          <!-- 中線 (網子位置) -->
                          <div class="court-net"></div>
                          <!-- 網柱 -->
                          <div class="court-net-post top"></div>
                          <div class="court-net-post bottom"></div>
                          
                          <!-- 水平中線 -->
                          <div class="court-center-line"></div>
                          
                          <!-- 短發球線 (左) -->
                          <div class="court-service-line left"></div>
                          <!-- 短發球線 (右) -->
                          <div class="court-service-line right"></div>
                          
                          <!-- 左隊區域標示 (左側) -->
                          <div class="team-label left">左隊</div>
                          
                          <!-- 左隊上發球區 -->
                          <div 
                            :style="{ backgroundColor: getServeAreaColor('left-top') }"
                            class="serve-area left-top"
                          >
                            <span class="serve-text">
                              {{ getServeAreaText('left-top') }}
                            </span>
                          </div>
                          
                          <!-- 左隊下發球區 -->
                          <div 
                            :style="{ backgroundColor: getServeAreaColor('left-bottom') }"
                            class="serve-area left-bottom"
                          >
                            <span class="serve-text">
                              {{ getServeAreaText('left-bottom') }}
                            </span>
                          </div>
                          
                          <!-- 右隊區域標示 (右側) -->
                          <div class="team-label right">右隊</div>
                          
                          <!-- 右隊上發球區 -->
                          <div 
                            :style="{ backgroundColor: getServeAreaColor('right-top') }"
                            class="serve-area right-top"
                          >
                            <span class="serve-text">
                              {{ getServeAreaText('right-top') }}
                            </span>
                          </div>
                          
                          <!-- 右隊下發球區 -->
                          <div 
                            :style="{ backgroundColor: getServeAreaColor('right-bottom') }"
                            class="serve-area right-bottom"
                          >
                            <span class="serve-text">
                              {{ getServeAreaText('right-bottom') }}
                            </span>
                          </div>
                        </div>
                      </v-col>
                    </v-row>
                    
                    <!-- 分隔線 -->
                    <v-divider class="my-3" :thickness="3"></v-divider>
                    
                    <!-- 下半部：計分區域（左右並排） -->
                    <v-row class="mb-2">
                      <!-- 左隊 -->
                      <v-col cols="6" class="text-center pa-2">
                        <div class="mb-3 team-name left">左隊</div>
                        <div class="mb-4 score-display left">{{ scoreLeft }}</div>
                        <div>
                          <v-btn 
                            color="primary" 
                            @click="addScore('left')" 
                            class="ma-1 score-button"
                          >
                            +
                          </v-btn>
                          <v-btn 
                            color="secondary" 
                            @click="subScore('left')" 
                            class="ma-1 score-button"
                          >
                            -
                          </v-btn>
                        </div>
                      </v-col>
                      
                      <!-- 右隊 -->
                      <v-col cols="6" class="text-center pa-2">
                        <div class="mb-3 team-name right">右隊</div>
                        <div class="mb-4 score-display right">{{ scoreRight }}</div>
                        <div>
                          <v-btn 
                            color="primary" 
                            @click="addScore('right')" 
                            class="ma-1 score-button"
                          >
                            +
                          </v-btn>
                          <v-btn 
                            color="secondary" 
                            @click="subScore('right')" 
                            class="ma-1 score-button"
                          >
                            -
                          </v-btn>
                        </div>
                      </v-col>
                    </v-row>
                    
                    <!-- 重置按鈕 -->
                    <v-row justify="center" class="mt-2">
                      <v-col cols="auto">
                        <v-btn 
                          color="error" 
                          @click="resetScore" 
                          class="px-4 reset-button"
                        >
                          <v-icon left class="reset-icon">mdi-refresh</v-icon>
                          重置分數
                        </v-btn>
                      </v-col>
                    </v-row>
                </v-card>
              </v-col>
            </v-row>
          </v-container>
        </v-main>
      </v-app>
    </div>
    <script type="module">
      import { createApp, ref, computed } from "vue"
      import { createVuetify } from "vuetify"
      const App = {
        setup() {
          // 簡單的計分功能
          const scoreLeft = ref(0)
          const scoreRight = ref(0)
          
          // 獲取發球區域背景顏色
          function getServeAreaColor(area) {
            const [team, position] = area.split('-')
            const teamScore = team === 'left' ? scoreLeft.value : scoreRight.value
            
            let shouldHighlight
            if (scoreLeft.value === 0 && scoreRight.value === 0) {
              // 只有當兩邊都是0:0時，都在右方發球：左隊右方(下區)，右隊右方(上區)
              shouldHighlight = (team === 'left' && position === 'bottom') || 
                               (team === 'right' && position === 'top')
            } else {
              // 其他情況使用統一的奇偶數規則：偶數分右方發球，奇數分左方發球
              if (team === 'left') {
                // 左隊：偶數分右方(下區)，奇數分左方(上區)
                shouldHighlight = (teamScore % 2 === 0 && position === 'bottom') || 
                                 (teamScore % 2 === 1 && position === 'top')
              } else {
                // 右隊：偶數分右方(上區)，奇數分左方(下區)
                shouldHighlight = (teamScore % 2 === 0 && position === 'top') || 
                                 (teamScore % 2 === 1 && position === 'bottom')
              }
            }
            
            if (shouldHighlight) {
              return team === 'left' ? 'rgba(33, 150, 243, 0.6)' : 'rgba(244, 67, 54, 0.6)' // 左隊藍色，右隊紅色
            }
            return 'rgba(255,255,255,0.1)' // 預設透明
          }
          
          // 獲取發球區域文字
          function getServeAreaText(area) {
            const [team, position] = area.split('-')
            const teamScore = team === 'left' ? scoreLeft.value : scoreRight.value
            
            let shouldHighlight
            if (scoreLeft.value === 0 && scoreRight.value === 0) {
              // 只有當兩邊都是0:0時，都在右方發球：左隊右方(下區)，右隊右方(上區)
              shouldHighlight = (team === 'left' && position === 'bottom') || 
                               (team === 'right' && position === 'top')
            } else {
              // 其他情況使用統一的奇偶數規則：偶數分右方發球，奇數分左方發球
              if (team === 'left') {
                // 左隊：偶數分右方(下區)，奇數分左方(上區)
                shouldHighlight = (teamScore % 2 === 0 && position === 'bottom') || 
                                 (teamScore % 2 === 1 && position === 'top')
              } else {
                // 右隊：偶數分右方(上區)，奇數分左方(下區)
                shouldHighlight = (teamScore % 2 === 0 && position === 'top') || 
                                 (teamScore % 2 === 1 && position === 'bottom')
              }
            }
            
            if (shouldHighlight) {
              return '🏸發球'
            }
            return position === 'top' ? '上區' : '下區'
          }
          
          function addScore(team) {
            if (team === 'left') {
              scoreLeft.value++
            } else {
              scoreRight.value++
            }
          }
          
          function subScore(team) {
            if (team === 'left' && scoreLeft.value > 0) {
              scoreLeft.value--
            } else if (team === 'right' && scoreRight.value > 0) {
              scoreRight.value--
            }
          }
          
          function resetScore() {
            scoreLeft.value = 0
            scoreRight.value = 0
          }
          
          return {
            scoreLeft,
            scoreRight,
            addScore,
            subScore,
            resetScore,
            getServeAreaColor,
            getServeAreaText
          }
        }
      }
      
      const vuetify = createVuetify()
      const app = createApp(App)
      app.use(vuetify).mount('#app')
    </script>
  </body>
</html>