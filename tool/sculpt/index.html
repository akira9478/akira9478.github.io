<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sculpt - 打造你的健身旅程</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: '#0f172a',
              accent: '#3b82f6',
              soft: '#f1f5f9',
            },
            animation: {
              'fade-in': 'fadeIn 0.3s ease-out forwards',
              'slide-up': 'slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards',
              'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
            },
            keyframes: {
              fadeIn: {
                '0%': { opacity: '0' },
                '100%': { opacity: '1' },
              },
              slideUp: {
                '0%': { opacity: '0', transform: 'translateY(20px)' },
                '100%': { opacity: '1', transform: 'translateY(0)' },
              }
            },
          },
        },
      };
    </script>
    <style>
      html { scrollbar-gutter: stable; }
      ::-webkit-scrollbar { width: 8px; height: 8px; }
      ::-webkit-scrollbar-track { background: transparent; }
      ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
      ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
      .no-scrollbar::-webkit-scrollbar { display: none; }
      .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
      body { font-family: 'Inter', system-ui, sans-serif; background-color: #f8fafc; color: #1e293b; }
      select { -webkit-appearance: none; appearance: none; }
    </style>

    <!-- Libraries -->
    <script crossorigin src="https://unpkg.com/react@18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Lucide Icons (Vanilla JS version for raw SVG data) -->
    <script src="https://unpkg.com/lucide@0.294.0/dist/umd/lucide.min.js"></script>
  <script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.2.1",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.1/",
    "react/": "https://aistudiocdn.com/react@^19.2.1/",
    "lucide-react": "https://aistudiocdn.com/lucide-react@^0.556.0",
    "vite": "https://aistudiocdn.com/vite@^7.2.6",
    "@vitejs/plugin-react": "https://aistudiocdn.com/@vitejs/plugin-react@^5.1.1"
  }
}
</script>
</head>
  <body>
    <div id="root"></div>

    <!-- DATA SCRIPT (Pure JS) -->
    <script>
      // 1. Types & Constants
      const MuscleGroup = {
        Chest: '胸部', Back: '背部', Legs: '腿部', Shoulders: '肩部', Arms: '手臂', Core: '核心', Cardio: '有氧'
      };

      const IMG_BASE = "https://raw.githubusercontent.com/yuhonas/free-exercise-db/main/exercises";

      const EXERCISES = [
        // --- 胸部 ---
        {
          id: 'chest-1',
          name: '伏地挺身 Push-up',
          muscleGroup: MuscleGroup.Chest,
          description: '經典的上肢推力動作，透過改變雙手距離與角度刺激不同部位。',
          targetMuscles: ['chest', 'front-delts', 'triceps', 'abs'],
          difficulty: '初階',
          variants: ['標準 Standard', '跪姿 Kneeling', '寬距 Wide', '鑽石 (窄距) Diamond'],
          images: [`${IMG_BASE}/Pushups/0.jpg`, `${IMG_BASE}/Pushups/1.jpg`],
          variantImages: {
            '跪姿 Kneeling': [`${IMG_BASE}/Kneeling_Pushups/0.jpg`, `${IMG_BASE}/Kneeling_Pushups/1.jpg`],
            '寬距 Wide': [`${IMG_BASE}/Wide_Hands_Pushup/0.jpg`, `${IMG_BASE}/Wide_Hands_Pushup/1.jpg`],
            '鑽石 (窄距) Diamond': [`${IMG_BASE}/Diamond_Pushup/0.jpg`, `${IMG_BASE}/Diamond_Pushup/1.jpg`]
          }
        },
        {
          id: 'chest-2',
          name: '臥推 Bench Press',
          muscleGroup: MuscleGroup.Chest,
          description: '健身房王牌動作，能最大化發展上身推力與肌肉量。',
          targetMuscles: ['chest', 'front-delts', 'triceps'],
          difficulty: '中階',
          variants: ['槓鈴平板 Barbell Flat', '啞鈴平板 Dumbbell Flat', '上斜啞鈴 Incline', '下斜啞鈴 Decline'],
          images: [`${IMG_BASE}/Barbell_Bench_Press_-_Medium_Grip/0.jpg`, `${IMG_BASE}/Barbell_Bench_Press_-_Medium_Grip/1.jpg`],
          variantImages: {
            '啞鈴平板 Dumbbell Flat': [`${IMG_BASE}/Dumbbell_Bench_Press/0.jpg`, `${IMG_BASE}/Dumbbell_Bench_Press/1.jpg`],
            '上斜啞鈴 Incline': [`${IMG_BASE}/Incline_Dumbbell_Bench_Press/0.jpg`, `${IMG_BASE}/Incline_Dumbbell_Bench_Press/1.jpg`],
            '下斜啞鈴 Decline': [`${IMG_BASE}/Decline_Dumbbell_Bench_Press/0.jpg`, `${IMG_BASE}/Decline_Dumbbell_Bench_Press/1.jpg`]
          }
        },
        {
          id: 'chest-3',
          name: '飛鳥夾胸 Chest Fly',
          muscleGroup: MuscleGroup.Chest,
          description: '孤立胸肌的動作，專注於肌肉的伸展與收縮感。',
          targetMuscles: ['chest', 'front-delts'],
          difficulty: '中階',
          variants: ['啞鈴飛鳥 Dumbbell', '繩索夾胸 Cable', '機械式夾胸 Machine'],
          images: [`${IMG_BASE}/Dumbbell_Flyes/0.jpg`, `${IMG_BASE}/Dumbbell_Flyes/1.jpg`],
          variantImages: {
             '繩索夾胸 Cable': [`${IMG_BASE}/Cable_Crossover/0.jpg`, `${IMG_BASE}/Cable_Crossover/1.jpg`],
             '機械式夾胸 Machine': [`${IMG_BASE}/Butterfly/0.jpg`, `${IMG_BASE}/Butterfly/1.jpg`]
          }
        },
        // --- 背部 ---
        {
          id: 'back-1',
          name: '引體向上 Pull-up',
          muscleGroup: MuscleGroup.Back,
          description: '垂直拉力動作，打造倒三角體型的關鍵。',
          targetMuscles: ['lats', 'biceps', 'traps', 'forearms'],
          difficulty: '高階',
          variants: ['正手 Pull-up', '反手 Chin-up', '機械下拉 Lat Pulldown'],
          images: [`${IMG_BASE}/Pullups/0.jpg`, `${IMG_BASE}/Pullups/1.jpg`],
          variantImages: {
            '反手 Chin-up': [`${IMG_BASE}/Chinups/0.jpg`, `${IMG_BASE}/Chinups/1.jpg`],
            '機械下拉 Lat Pulldown': [`${IMG_BASE}/Cable_Pulldown/0.jpg`, `${IMG_BASE}/Cable_Pulldown/1.jpg`]
          }
        },
        {
          id: 'back-2',
          name: '俯身划船 Barbell Row',
          muscleGroup: MuscleGroup.Back,
          description: '水平拉力動作，增加背部厚度與改善圓肩。',
          targetMuscles: ['lats', 'traps', 'rear-delts', 'biceps', 'lower-back'],
          difficulty: '中階',
          variants: ['槓鈴俯身 Barbell Bent-over', '單手啞鈴 Dumbbell', '反向划船 Inverted'],
          images: [`${IMG_BASE}/Bent_Over_Barbell_Row/0.jpg`, `${IMG_BASE}/Bent_Over_Barbell_Row/1.jpg`],
          variantImages: {
            '單手啞鈴 Dumbbell': [`${IMG_BASE}/Dumbbell_Row/0.jpg`, `${IMG_BASE}/Dumbbell_Row/1.jpg`],
            '反向划船 Inverted': [`${IMG_BASE}/Inverted_Row/0.jpg`, `${IMG_BASE}/Inverted_Row/1.jpg`]
          }
        },
        {
          id: 'back-3',
          name: '硬舉 Deadlift',
          muscleGroup: MuscleGroup.Back,
          description: '全身性力量動作，強化後側鏈條，提升整體力量。',
          targetMuscles: ['lower-back', 'glutes', 'hamstrings', 'traps', 'forearms', 'quads'],
          difficulty: '高階',
          variants: ['傳統槓鈴 Conventional', '羅馬尼亞 RDL', '相撲 Sumo'],
          images: [`${IMG_BASE}/Barbell_Deadlift/0.jpg`, `${IMG_BASE}/Barbell_Deadlift/1.jpg`],
          variantImages: {
            '羅馬尼亞 RDL': [`${IMG_BASE}/Romanian_Deadlift/0.jpg`, `${IMG_BASE}/Romanian_Deadlift/1.jpg`],
            '相撲 Sumo': [`${IMG_BASE}/Sumo_Deadlift/0.jpg`, `${IMG_BASE}/Sumo_Deadlift/1.jpg`]
          }
        },
        // --- 腿部 ---
        {
          id: 'legs-1',
          name: '深蹲 Squat',
          muscleGroup: MuscleGroup.Legs,
          description: '動作之王。訓練下肢力量、爆發力與核心穩定的最佳選擇。',
          targetMuscles: ['quads', 'glutes', 'hamstrings', 'lower-back', 'abs'],
          difficulty: '中階',
          variants: ['徒手 Bodyweight', '槓鈴頸後 Back Squat', '高腳杯 Goblet', '前蹲舉 Front Squat'],
          images: [`${IMG_BASE}/Barbell_Squat/0.jpg`, `${IMG_BASE}/Barbell_Squat/1.jpg`],
          variantImages: {
            '徒手 Bodyweight': [`${IMG_BASE}/Air_Squat/0.jpg`, `${IMG_BASE}/Air_Squat/1.jpg`],
            '高腳杯 Goblet': [`${IMG_BASE}/Goblet_Squat/0.jpg`, `${IMG_BASE}/Goblet_Squat/1.jpg`],
            '前蹲舉 Front Squat': [`${IMG_BASE}/Front_Squat/0.jpg`, `${IMG_BASE}/Front_Squat/1.jpg`]
          }
        },
        {
          id: 'legs-2',
          name: '弓箭步 Lunge',
          muscleGroup: MuscleGroup.Legs,
          description: '單腳功能性訓練，改善左右肌力不均與平衡感。',
          targetMuscles: ['quads', 'glutes', 'hamstrings', 'calves'],
          difficulty: '中階',
          variants: ['啞鈴前行 Walking', '原地啞鈴 Dumbbell', '保加利亞分腿蹲 Bulgarian Split'],
          images: [`${IMG_BASE}/Dumbbell_Lunges/0.jpg`, `${IMG_BASE}/Dumbbell_Lunges/1.jpg`],
          variantImages: {
            '啞鈴前行 Walking': [`${IMG_BASE}/Dumbbell_Lunges/0.jpg`, `${IMG_BASE}/Dumbbell_Lunges/1.jpg`], 
            '保加利亞分腿蹲 Bulgarian Split': [`${IMG_BASE}/Split_Squat/0.jpg`, `${IMG_BASE}/Split_Squat/1.jpg`]
          }
        },
        {
          id: 'legs-3',
          name: '腿推舉 Leg Press',
          muscleGroup: MuscleGroup.Legs,
          description: '機械式輔助訓練，能安全地對腿部肌群施加高強度負荷。',
          targetMuscles: ['quads', 'hamstrings'],
          difficulty: '初階',
          variants: ['機械腿推 Leg Press', '坐姿腿屈伸 Leg Extension', '趴姿腿後勾 Leg Curl'],
          images: [`${IMG_BASE}/Leg_Press/0.jpg`, `${IMG_BASE}/Leg_Press/1.jpg`],
          variantImages: {
            '坐姿腿屈伸 Leg Extension': [`${IMG_BASE}/Leg_Extensions/0.jpg`, `${IMG_BASE}/Leg_Extensions/1.jpg`],
            '趴姿腿後勾 Leg Curl': [`${IMG_BASE}/Lying_Leg_Curls/0.jpg`, `${IMG_BASE}/Lying_Leg_Curls/1.jpg`]
          }
        },
        {
          id: 'legs-4',
          name: '提踵 Calf Raise',
          muscleGroup: MuscleGroup.Legs,
          description: '針對小腿肌群的訓練，增加腳踝穩定性與爆發力。',
          targetMuscles: ['calves'],
          difficulty: '初階',
          variants: ['啞鈴負重 Weighted', '徒手 Standing', '坐姿機械 Seated'],
          images: [`${IMG_BASE}/Dumbbell_Calf_Raise/0.jpg`, `${IMG_BASE}/Dumbbell_Calf_Raise/1.jpg`],
          variantImages: {
            '徒手 Standing': [`${IMG_BASE}/Standing_Calf_Raises/0.jpg`, `${IMG_BASE}/Standing_Calf_Raises/1.jpg`],
            '坐姿機械 Seated': [`${IMG_BASE}/Seated_Calf_Raise/0.jpg`, `${IMG_BASE}/Seated_Calf_Raise/1.jpg`]
          }
        },
        // --- 肩部 ---
        {
          id: 'shoulders-1',
          name: '肩推 Shoulder Press',
          muscleGroup: MuscleGroup.Shoulders,
          description: '垂直推力動作，打造飽滿的肩膀線條。',
          targetMuscles: ['front-delts', 'triceps', 'traps'],
          difficulty: '中階',
          variants: ['站姿槓鈴 Barbell', '坐姿啞鈴 Dumbbell', '阿諾推舉 Arnold'],
          images: [`${IMG_BASE}/Barbell_Shoulder_Press/0.jpg`, `${IMG_BASE}/Barbell_Shoulder_Press/1.jpg`],
          variantImages: {
            '坐姿啞鈴 Dumbbell': [`${IMG_BASE}/Seated_Dumbbell_Shoulder_Press/0.jpg`, `${IMG_BASE}/Seated_Dumbbell_Shoulder_Press/1.jpg`],
            '阿諾推舉 Arnold': [`${IMG_BASE}/Arnold_Press/0.jpg`, `${IMG_BASE}/Arnold_Press/1.jpg`]
          }
        },
        {
          id: 'shoulders-2',
          name: '側平舉 Lateral Raise',
          muscleGroup: MuscleGroup.Shoulders,
          description: '孤立中束三角肌，讓肩膀看起來更寬的關鍵動作。',
          targetMuscles: ['front-delts', 'rear-delts'], 
          difficulty: '初階',
          variants: ['啞鈴 Dumbbell', '繩索 Cable'],
          images: [`${IMG_BASE}/Side_Lateral_Raise/0.jpg`, `${IMG_BASE}/Side_Lateral_Raise/1.jpg`],
          variantImages: {
             '繩索 Cable': [`${IMG_BASE}/Cable_Lateral_Raise/0.jpg`, `${IMG_BASE}/Cable_Lateral_Raise/1.jpg`]
          }
        },
        // --- 手臂 ---
        {
          id: 'arms-1',
          name: '二頭彎舉 Bicep Curl',
          muscleGroup: MuscleGroup.Arms,
          description: '手臂屈曲動作，增加上臂圍度。',
          targetMuscles: ['biceps', 'forearms'],
          difficulty: '初階',
          variants: ['槓鈴 Barbell', '啞鈴 Dumbbell', '集中彎舉 Concentration', '錘式 Hammer'],
          images: [`${IMG_BASE}/Barbell_Curl/0.jpg`, `${IMG_BASE}/Barbell_Curl/1.jpg`],
          variantImages: {
            '啞鈴 Dumbbell': [`${IMG_BASE}/Dumbbell_Bicep_Curl/0.jpg`, `${IMG_BASE}/Dumbbell_Bicep_Curl/1.jpg`],
            '錘式 Hammer': [`${IMG_BASE}/Hammer_Curls/0.jpg`, `${IMG_BASE}/Hammer_Curls/1.jpg`],
            '集中彎舉 Concentration': [`${IMG_BASE}/Concentration_Curls/0.jpg`, `${IMG_BASE}/Concentration_Curls/1.jpg`]
          }
        },
        {
          id: 'arms-2',
          name: '三頭伸展 Tricep Ext',
          muscleGroup: MuscleGroup.Arms,
          description: '手臂伸展動作，消除掰掰袖，增加推力。',
          targetMuscles: ['triceps'],
          difficulty: '初階',
          variants: ['繩索下壓 Cable Pushdown', '啞鈴頸後 Overhead', '板凳臂屈伸 Dips'],
          images: [`${IMG_BASE}/Pushdowns/0.jpg`, `${IMG_BASE}/Pushdowns/1.jpg`],
          variantImages: {
            '板凳臂屈伸 Dips': [`${IMG_BASE}/Bench_Dips/0.jpg`, `${IMG_BASE}/Bench_Dips/1.jpg`],
            '啞鈴頸後 Overhead': [`${IMG_BASE}/Seated_Triceps_Press/0.jpg`, `${IMG_BASE}/Seated_Triceps_Press/1.jpg`]
          }
        },
        // --- 核心 ---
        {
          id: 'core-1',
          name: '平板支撐 Plank',
          muscleGroup: MuscleGroup.Core,
          description: '等長收縮訓練，建立深層核心穩定性。',
          targetMuscles: ['abs', 'obliques', 'front-delts'],
          difficulty: '初階',
          variants: ['標準 Standard', '側向 Side Plank'],
          images: [`${IMG_BASE}/Plank/0.jpg`, `${IMG_BASE}/Plank/1.jpg`],
          variantImages: {
            '側向 Side Plank': [`${IMG_BASE}/Side_Plank/0.jpg`, `${IMG_BASE}/Side_Plank/1.jpg`]
          }
        },
        {
          id: 'core-2',
          name: '捲腹 Crunch',
          muscleGroup: MuscleGroup.Core,
          description: '針對腹直肌的收縮訓練，打造六塊肌線條。',
          targetMuscles: ['abs'],
          difficulty: '初階',
          variants: ['徒手捲腹 Crunch', '懸垂抬腿 Hanging Leg Raise'],
          images: [`${IMG_BASE}/Crunches/0.jpg`, `${IMG_BASE}/Crunches/1.jpg`],
          variantImages: {
            '懸垂抬腿 Hanging Leg Raise': [`${IMG_BASE}/Hanging_Leg_Raise/0.jpg`, `${IMG_BASE}/Hanging_Leg_Raise/1.jpg`]
          }
        },
        // --- 有氧 ---
        {
          id: 'cardio-1',
          name: '波比跳 Burpees',
          muscleGroup: MuscleGroup.Cardio,
          description: '短時間高強度的全身爆發，快速燃脂。',
          targetMuscles: ['quads', 'calves', 'abs', 'chest', 'lats'],
          difficulty: '中階',
          variants: ['波比跳 Burpees', '開合跳 Jumping Jacks', '登山者 Mountain Climber'],
          images: [`${IMG_BASE}/Burpees/0.jpg`, `${IMG_BASE}/Burpees/1.jpg`],
          variantImages: {
            '開合跳 Jumping Jacks': [`${IMG_BASE}/Jumping_Jacks/0.jpg`, `${IMG_BASE}/Jumping_Jacks/1.jpg`],
            '登山者 Mountain Climber': [`${IMG_BASE}/Mountain_Climbers/0.jpg`, `${IMG_BASE}/Mountain_Climbers/1.jpg`]
          }
        }
      ];

      const PRESETS = {
        FULL_BODY: ['legs-1', 'chest-1', 'back-2', 'shoulders-1', 'core-1'],
        UPPER_BODY: ['chest-2', 'back-1', 'shoulders-1', 'arms-1', 'arms-2'],
        LOWER_BODY: ['legs-1', 'legs-3', 'legs-2', 'legs-4', 'core-2'],
        ATHLETE_BALANCE: ['back-3', 'legs-2', 'shoulders-1', 'back-1', 'core-1']
      };
    </script>

    <!-- REACT LOGIC (Babel Transpiled) -->
    <script type="text/babel">
      const { useState, useEffect, Fragment, createElement } = React;
      
      // --- Helper: Create React Icon from Vanilla Lucide Data ---
      const createIcon = (name, size = 24, className = "") => {
        if (!window.lucide || !window.lucide.icons) return <span className="text-red-500">?</span>;
        
        // Find icon key case-insensitively (kebab or camel)
        const target = name.replace(/-/g, '').toLowerCase();
        const iconKey = Object.keys(window.lucide.icons).find(k => k.replace(/-/g, '').toLowerCase() === target);
        
        if (!iconKey) return <span className="text-xs text-red-400 font-mono" title={name}>[?]</span>;
        
        const [tag, attrs, children] = window.lucide.icons[iconKey];
        
        return (
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width={size}
            height={size}
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            className={className}
            {...attrs}
          >
            {children.map((child, i) => {
              const [cTag, cAttrs] = child;
              return createElement(cTag, { ...cAttrs, key: i });
            })}
          </svg>
        );
      };

      const Icon = ({ name, size, className }) => createIcon(name, size, className);

      // --- Component: MuscleMap ---
      const MuscleMap = ({ highlightedMuscles, className = "h-48" }) => {
        const isHighlighted = (id) => highlightedMuscles && highlightedMuscles.includes(id);
        const getFill = (id) => isHighlighted(id) ? "#ef4444" : "#cbd5e1";
        const getOpacity = (id) => isHighlighted(id) ? "1" : "0.5";

        return (
          <div className={`flex items-center justify-center gap-4 ${className}`}>
            <svg viewBox="0 0 100 200" className="h-full w-auto drop-shadow-sm">
              <g stroke="#64748b" strokeWidth="1" strokeLinecap="round" strokeLinejoin="round">
                <circle cx="50" cy="25" r="12" fill="#f1f5f9" />
                <path d="M35 45 Q50 55 65 45 L65 60 Q50 70 35 60 Z" fill={getFill('chest')} opacity={getOpacity('chest')} />
                <path d="M25 45 Q30 40 35 45 L35 55 L25 50 Z" fill={getFill('front-delts')} opacity={getOpacity('front-delts')} />
                <path d="M75 45 Q70 40 65 45 L65 55 L75 50 Z" fill={getFill('front-delts')} opacity={getOpacity('front-delts')} />
                <path d="M40 60 H60 V90 H40 Z" fill={getFill('abs')} opacity={getOpacity('abs')} />
                <path d="M35 60 H40 V90 H35 Q30 75 35 60 Z" fill={getFill('obliques')} opacity={getOpacity('obliques')} />
                <path d="M60 60 H65 Q70 75 65 90 H60 Z" fill={getFill('obliques')} opacity={getOpacity('obliques')} />
                <path d="M25 50 L20 70 L30 70 Z" fill={getFill('biceps')} opacity={getOpacity('biceps')} />
                <path d="M75 50 L80 70 L70 70 Z" fill={getFill('biceps')} opacity={getOpacity('biceps')} />
                <path d="M20 70 L15 95 L25 95 Z" fill={getFill('forearms')} opacity={getOpacity('forearms')} />
                <path d="M80 70 L85 95 L75 95 Z" fill={getFill('forearms')} opacity={getOpacity('forearms')} />
                <path d="M35 90 H50 V140 H40 Q35 115 35 90 Z" fill={getFill('quads')} opacity={getOpacity('quads')} />
                <path d="M50 90 H65 Q65 115 60 140 H50 Z" fill={getFill('quads')} opacity={getOpacity('quads')} />
                <path d="M40 140 L38 180 H48 L50 140 Z" fill={getFill('calves')} opacity={getOpacity('calves')} />
                <path d="M60 140 L62 180 H52 L50 140 Z" fill={getFill('calves')} opacity={getOpacity('calves')} />
              </g>
              <text x="50" y="195" textAnchor="middle" fontSize="8" fill="#94a3b8">正面</text>
            </svg>
            <svg viewBox="0 0 100 200" className="h-full w-auto drop-shadow-sm">
               <g stroke="#64748b" strokeWidth="1" strokeLinecap="round" strokeLinejoin="round">
                <circle cx="50" cy="25" r="12" fill="#f1f5f9" />
                <path d="M40 40 L50 35 L60 40 L50 55 Z" fill={getFill('traps')} opacity={getOpacity('traps')} />
                <path d="M35 50 L40 85 L50 90 L60 85 L65 50 L50 55 Z" fill={getFill('lats')} opacity={getOpacity('lats')} />
                <path d="M25 45 L35 48 L35 55 L25 50 Z" fill={getFill('rear-delts')} opacity={getOpacity('rear-delts')} />
                <path d="M75 45 L65 48 L65 55 L75 50 Z" fill={getFill('rear-delts')} opacity={getOpacity('rear-delts')} />
                <path d="M25 50 L22 70 L32 70 Z" fill={getFill('triceps')} opacity={getOpacity('triceps')} />
                <path d="M75 50 L78 70 L68 70 Z" fill={getFill('triceps')} opacity={getOpacity('triceps')} />
                <path d="M42 85 H58 L55 95 H45 Z" fill={getFill('lower-back')} opacity={getOpacity('lower-back')} />
                <path d="M35 95 H65 Q70 110 50 115 Q30 110 35 95 Z" fill={getFill('glutes')} opacity={getOpacity('glutes')} />
                <path d="M38 115 H50 V145 H42 Z" fill={getFill('hamstrings')} opacity={getOpacity('hamstrings')} />
                <path d="M62 115 H50 V145 H58 Z" fill={getFill('hamstrings')} opacity={getOpacity('hamstrings')} />
                <path d="M42 145 L40 175 H48 L50 145 Z" fill={getFill('calves')} opacity={getOpacity('calves')} />
                <path d="M58 145 L60 175 H52 L50 145 Z" fill={getFill('calves')} opacity={getOpacity('calves')} />
              </g>
              <text x="50" y="195" textAnchor="middle" fontSize="8" fill="#94a3b8">背面</text>
            </svg>
          </div>
        );
      };

      // --- Component: ExerciseIllustration ---
      const ExerciseIllustration = ({ name, images = [], className }) => {
        const [currentIndex, setCurrentIndex] = useState(0);
        const [hasError, setHasError] = useState(false);
        const displayText = encodeURIComponent(name);
        const placeholderUrl = `https://placehold.co/600x400/f8fafc/cbd5e1?text=${displayText}&font=roboto`;
        
        useEffect(() => { setCurrentIndex(0); setHasError(false); }, [images]);

        useEffect(() => {
          if (!images || images.length <= 1) return;
          const interval = setInterval(() => setCurrentIndex(p => (p + 1) % images.length), 1500);
          return () => clearInterval(interval);
        }, [images]);

        const currentImageUrl = (images && images.length > 0 && !hasError) ? images[currentIndex] : placeholderUrl;

        return (
          <div className={`relative group overflow-hidden bg-white flex items-center justify-center select-none ${className}`}>
            <img 
              src={currentImageUrl} 
              alt={name}
              onError={() => setHasError(true)}
              className="w-full h-full object-contain p-4 transition-opacity duration-500"
              loading="lazy"
              referrerPolicy="no-referrer"
            />
            {images.length > 1 && !hasError && (
              <div className="absolute bottom-2 left-1/2 -translate-x-1/2 flex gap-1">
                {images.map((_, idx) => (
                  <div key={idx} className={`w-1.5 h-1.5 rounded-full transition-colors ${idx === currentIndex ? 'bg-blue-500' : 'bg-slate-200'}`} />
                ))}
              </div>
            )}
          </div>
        );
      };

      // --- Component: InfoModal ---
      const InfoModal = ({ exercise, onClose }) => {
        const [selectedVariant, setSelectedVariant] = useState('');
        
        useEffect(() => { if (exercise) setSelectedVariant(exercise.variants[0]); }, [exercise]);
        if (!exercise) return null;

        const handleSearch = (query) => window.open(`https://www.google.com/search?tbm=isch&q=${encodeURIComponent(query + ' gym exercise form')}`, '_blank');
        const displayImages = exercise.variantImages?.[selectedVariant] || exercise.images;

        return (
          <div className="fixed inset-0 z-[60] flex items-center justify-center p-4">
            <div className="absolute inset-0 bg-black/60 backdrop-blur-sm animate-fade-in" onClick={onClose}></div>
            <div className="bg-white rounded-2xl shadow-2xl max-w-lg w-full overflow-hidden flex flex-col max-h-[90vh] relative z-10 animate-slide-up">
              <div className="bg-slate-900 p-6 text-white flex justify-between items-start shrink-0">
                <div><h3 className="text-2xl font-bold">{exercise.name}</h3><span className="inline-block mt-2 px-3 py-1 bg-blue-600 text-xs rounded-full font-semibold">{exercise.muscleGroup}</span></div>
                <button onClick={onClose} className="p-1 hover:bg-slate-700 rounded-full transition"><Icon name="x" size={24} /></button>
              </div>
              <div className="p-6 overflow-y-auto custom-scrollbar">
                <div className="mb-6 flex flex-col gap-4">
                  <h4 className="text-xs font-semibold text-slate-400 uppercase tracking-wide">動作示範</h4>
                  <div className="w-full bg-slate-50 rounded-xl border border-slate-100 overflow-hidden">
                     <ExerciseIllustration name={exercise.name} images={displayImages} className="h-56 w-full bg-white" />
                  </div>
                  <div className="flex gap-2 items-center">
                    <span className="text-xs font-bold text-slate-500 whitespace-nowrap">切換變體:</span>
                    <select value={selectedVariant} onChange={(e) => setSelectedVariant(e.target.value)} className="w-full text-sm bg-white border border-slate-200 rounded-lg px-3 py-2 text-slate-700 outline-none focus:ring-2 focus:ring-blue-500/20">
                      {exercise.variants.map(v => (<option key={v} value={v}>{v}</option>))}
                    </select>
                  </div>
                </div>
                <div className="mb-6 flex flex-col gap-4">
                  <h4 className="text-xs font-semibold text-slate-400 uppercase tracking-wide">肌群解剖</h4>
                  <div className="w-full h-48 bg-slate-50 rounded-xl border border-slate-100 flex items-center justify-center">
                    <MuscleMap highlightedMuscles={exercise.targetMuscles} className="h-40" />
                  </div>
                  <button onClick={() => handleSearch(exercise.name + ' ' + selectedVariant)} className="w-full py-3 bg-blue-50 text-blue-600 font-bold rounded-xl border border-blue-200 hover:bg-blue-100 transition flex items-center justify-center gap-2">
                    <Icon name="search" size={18} /> 在 Google 搜尋動作細節
                  </button>
                </div>
                <div className="mb-6">
                  <h4 className="text-sm font-semibold text-slate-500 uppercase tracking-wide mb-2">動作說明</h4>
                  <p className="text-slate-700 text-sm leading-relaxed text-justify">{exercise.description}</p>
                </div>
              </div>
            </div>
          </div>
        );
      };

      // --- Main Application ---
      const App = () => {
        const [view, setView] = useState('hero');
        const [selectedMuscle, setSelectedMuscle] = useState('全部');
        const [myPlan, setMyPlan] = useState([]);
        const [history, setHistory] = useState([]);
        const [customPresets, setCustomPresets] = useState([]);
        const [activeInfoExercise, setActiveInfoExercise] = useState(null);
        const [pendingConfig, setPendingConfig] = useState(null);
        const [showImportModal, setShowImportModal] = useState(false);
        const [showSavePresetModal, setShowSavePresetModal] = useState(false);
        const [toastMessage, setToastMessage] = useState(null);
        const [selectedVariants, setSelectedVariants] = useState({});

        // Utils
        const showToast = (msg) => setToastMessage(msg);
        const generateHash = (items) => btoa(unescape(encodeURIComponent(JSON.stringify(items.map(i => ({id:i.exerciseId, v:i.variant, s:i.sets, r:i.reps, w:i.weight}))))));
        const copyToClip = (txt) => {
          if(navigator.clipboard && navigator.clipboard.writeText) navigator.clipboard.writeText(txt);
          else { const el = document.createElement("textarea"); el.value = txt; document.body.appendChild(el); el.select(); document.execCommand('copy'); document.body.removeChild(el); }
        };
        const useLockBodyScroll = (isLocked) => {
          useEffect(() => {
            if(!isLocked) return;
            const scrollY = window.scrollY;
            document.body.style.position = 'fixed'; document.body.style.top = `-${scrollY}px`; document.body.style.width = '100%';
            return () => {
              const sy = document.body.style.top;
              document.body.style.position = ''; document.body.style.top = ''; document.body.style.width = '';
              window.scrollTo(0, parseInt(sy || '0') * -1);
            };
          }, [isLocked]);
        };

        useEffect(() => {
          try {
             const h = localStorage.getItem('sculpt_history'); if(h) setHistory(JSON.parse(h));
             const p = localStorage.getItem('sculpt_custom_presets'); if(p) setCustomPresets(JSON.parse(p));
          } catch(e){}
        }, []);
        useEffect(() => window.scrollTo(0,0), [view]);

        const loadPreset = (ids) => setMyPlan(ids.map(id => { const e = EXERCISES.find(ex => ex.id === id); return e ? { instanceId: Math.random().toString(), exerciseId: e.id, variant: e.variants[0], name: e.name, sets: 3, reps: 10, weight: 0, completed: false } : null }).filter(Boolean));
        
        // Modals & Sub-components
        const Toast = () => <div className="fixed top-6 left-1/2 -translate-x-1/2 z-[100] bg-slate-800 text-white px-6 py-3 rounded-full shadow-lg flex items-center gap-2 animate-slide-up"><Icon name="check" size={16} /><span className="text-sm font-bold">{toastMessage}</span></div>;

        const PlanConfigModal = () => {
          const [s, setS] = useState(3); const [r, setR] = useState(10); const [w, setW] = useState(0);
          useLockBodyScroll(true);
          return (
            <div className="fixed inset-0 z-[70] flex items-end md:items-center justify-center">
              <div className="absolute inset-0 bg-black/50 backdrop-blur-sm animate-fade-in" onClick={() => setPendingConfig(null)}></div>
              <div className="relative z-10 bg-white w-full md:w-96 p-6 rounded-t-3xl md:rounded-2xl shadow-xl animate-slide-up">
                 <h3 className="text-xl font-bold mb-1">{pendingConfig.exercise.name}</h3>
                 <p className="text-sm text-blue-600 font-bold mb-6">{pendingConfig.variant}</p>
                 <div className="space-y-4 mb-6">
                   <div><label className="text-sm font-bold text-slate-700 flex justify-between">組數<span className="text-blue-600">{s} 組</span></label><input type="range" min="1" max="10" value={s} onChange={e=>setS(Number(e.target.value))} className="w-full h-2 bg-slate-200 rounded-lg appearance-none accent-slate-900"/></div>
                   <div><label className="text-sm font-bold text-slate-700 flex justify-between">次數<span className="text-blue-600">{r} 下</span></label><input type="range" min="1" max="30" value={r} onChange={e=>setR(Number(e.target.value))} className="w-full h-2 bg-slate-200 rounded-lg appearance-none accent-slate-900"/></div>
                   <div><label className="text-sm font-bold text-slate-700 flex justify-between">負重<span className="text-blue-600">{w} kg</span></label><div className="flex gap-2"><button onClick={()=>setW(Math.max(0,w-2.5))} className="w-10 h-10 bg-slate-100 rounded font-bold">-</button><input type="number" value={w} onChange={e=>setW(Number(e.target.value))} className="flex-1 text-center bg-slate-50 rounded border"/><button onClick={()=>setW(w+2.5)} className="w-10 h-10 bg-slate-100 rounded font-bold">+</button></div></div>
                 </div>
                 <button onClick={() => { setMyPlan([...myPlan, { instanceId: Math.random().toString(), exerciseId: pendingConfig.exercise.id, variant: pendingConfig.variant, name: pendingConfig.exercise.name, sets: s, reps: r, weight: w, completed: false }]); setPendingConfig(null); }} className="w-full py-3 bg-slate-900 text-white rounded-xl font-bold">加入清單</button>
              </div>
            </div>
          )
        };

        const ImportModal = () => {
          useLockBodyScroll(true);
          return (
             <div className="fixed inset-0 z-[70] flex items-center justify-center px-4">
                <div className="absolute inset-0 bg-black/60 backdrop-blur-sm animate-fade-in" onClick={() => setShowImportModal(false)}></div>
                <div className="relative z-10 bg-white w-full max-w-md p-6 rounded-2xl shadow-2xl animate-slide-up">
                  <h3 className="font-bold text-lg mb-4">匯入代碼</h3>
                  <textarea id="import-txt" className="w-full h-32 bg-slate-50 border rounded-xl p-3 text-xs font-mono mb-4" placeholder="在此貼上代碼..."></textarea>
                  <button onClick={() => {
                     try {
                        const items = JSON.parse(decodeURIComponent(escape(atob(document.getElementById('import-txt').value.trim()))));
                        setMyPlan(items.map(i => { const e=EXERCISES.find(ex=>ex.id===i.id); return e ? {instanceId:Math.random().toString(), exerciseId:i.id, variant:i.v, name:e.name, sets:i.s, reps:i.r, weight:i.w, completed:false} : null}).filter(Boolean));
                        setShowImportModal(false); showToast("匯入成功");
                     } catch(e){ alert("代碼無效"); }
                  }} className="w-full py-3 bg-slate-900 text-white font-bold rounded-xl">匯入</button>
                </div>
             </div>
          )
        };

        // Views
        if(view === 'hero') return (
          <div className="min-h-screen flex flex-col justify-center items-center p-6 text-center animate-fade-in">
             <div className="bg-blue-50 text-blue-700 px-4 py-2 rounded-full text-sm font-bold mb-6 inline-flex gap-2"><Icon name="activity" size={16}/><span>Intelligent Fitness Architect</span></div>
             <h1 className="text-5xl md:text-7xl font-bold text-slate-900 mb-6">雕塑你的<br/><span className="text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-indigo-600">意志與體態</span></h1>
             <p className="text-xl text-slate-600 mb-10">精準選擇動作、設定負重與組數。<br/>今天就開始執行你的專屬訓練菜單。</p>
             <div className="flex gap-4"><button onClick={()=>setView('builder')} className="bg-slate-900 text-white px-8 py-3 rounded-full font-bold text-lg hover:shadow-xl transition flex items-center gap-2">開始規劃 <Icon name="chevron-right"/></button><button onClick={()=>setView('history')} className="bg-white border text-slate-700 px-8 py-3 rounded-full font-bold hover:bg-slate-50 flex items-center gap-2"><Icon name="history"/> 歷史紀錄</button></div>
          </div>
        );

        if(view === 'workout') return (
          <div className="min-h-screen bg-slate-900 text-white flex flex-col">
             <header className="p-6 bg-slate-800/50 flex justify-between items-center"><h2 className="text-2xl font-bold flex gap-2"><Icon name="activity" className="text-green-400"/>訓練中</h2><button onClick={()=>setView('builder')} className="text-slate-400 text-sm">返回</button></header>
             <main className="p-6 flex-1 overflow-y-auto pb-32 space-y-4">
                {myPlan.map(i => (
                  <div key={i.instanceId} onClick={()=>setMyPlan(myPlan.map(x=>x.instanceId===i.instanceId ? {...x, completed:!x.completed}:x))} className={`p-4 rounded-xl border cursor-pointer transition flex justify-between items-center ${i.completed?'bg-green-900/20 border-green-500/50':'bg-slate-800 border-slate-700'}`}>
                     <div><h3 className={`font-bold ${i.completed?'text-green-400 line-through':'text-white'}`}>{i.name}</h3><p className="text-slate-400 text-sm">{i.variant} • {i.weight}kg × {i.sets}組 × {i.reps}下</p></div>
                     <div className={`w-6 h-6 rounded-full border-2 flex items-center justify-center ${i.completed?'bg-green-500 border-green-500':'border-slate-500'}`}>{i.completed&&<Icon name="check" size={14} className="text-white"/>}</div>
                  </div>
                ))}
             </main>
             <div className="fixed bottom-0 w-full p-6 bg-slate-800 border-t border-slate-700 flex gap-4">
                <button onClick={()=>setView('builder')} className="flex-1 py-3 bg-slate-700 text-slate-300 rounded-xl font-bold">稍後</button>
                <button onClick={()=>{
                   const rec = { id:Date.now(), date:new Date().toISOString(), items:myPlan, totalSets:myPlan.reduce((a,b)=>a+(b.completed?b.sets:0),0) };
                   setHistory([rec, ...history]); localStorage.setItem('sculpt_history', JSON.stringify([rec, ...history]));
                   setMyPlan([]); setView('history');
                }} className="flex-[2] py-3 bg-green-600 text-white rounded-xl font-bold flex justify-center gap-2"><Icon name="save"/> 完成並儲存</button>
             </div>
          </div>
        );
        
        if(view === 'history') return (
           <div className="min-h-screen bg-slate-50">
              <header className="p-6 bg-white border-b sticky top-0 flex gap-4 items-center"><button onClick={()=>setView('builder')}><Icon name="chevron-left"/></button><h2 className="text-xl font-bold">歷史紀錄</h2></header>
              <main className="p-6 max-w-3xl mx-auto space-y-4">
                 {history.length===0 && <div className="text-center py-20 text-slate-400">無紀錄</div>}
                 {history.map(h => (
                    <div key={h.id} className="bg-white p-6 rounded-2xl border shadow-sm">
                       <div className="flex justify-between border-b pb-4 mb-4">
                          <div><h3 className="font-bold">{new Date(h.date).toLocaleDateString()}</h3><span className="text-xs text-slate-500">總組數: {h.totalSets}</span></div>
                          <button onClick={()=>{ copyToClip(generateHash(h.items)); showToast("已複製"); }} className="p-2 bg-slate-50 rounded"><Icon name="copy" size={16}/></button>
                       </div>
                       <div className="space-y-2">{h.items.map((i,x)=><div key={x} className="flex justify-between text-sm text-slate-600"><span>{i.name} <span className="text-xs bg-slate-100 px-1 rounded">{i.variant}</span></span><span>{i.weight}kg × {i.sets} × {i.reps}</span></div>)}</div>
                    </div>
                 ))}
              </main>
           </div>
        );

        // Builder View
        const filtered = selectedMuscle==='全部' ? EXERCISES : EXERCISES.filter(e=>e.muscleGroup===selectedMuscle);
        
        return (
          <div className="min-h-screen bg-slate-50 pb-32">
             <header className="sticky top-0 bg-white/80 backdrop-blur z-40 border-b px-6 py-4 flex justify-between shadow-sm">
                <div className="font-bold text-xl flex gap-2 items-center cursor-pointer" onClick={()=>setView('hero')}><span className="bg-slate-900 text-white p-1 rounded"><Icon name="layers" size={18}/></span>SCULPT</div>
                <div className="flex gap-2"><button onClick={()=>setShowImportModal(true)} className="px-3 py-1 bg-slate-100 rounded text-xs font-bold flex gap-1 items-center"><Icon name="upload" size={14}/> 匯入</button><button onClick={()=>setView('history')}><Icon name="history"/></button><span className="bg-slate-100 px-3 py-1 rounded-full text-sm flex items-center gap-1"><Icon name="user" size={14}/> {myPlan.length}</span></div>
             </header>
             <main className="max-w-7xl mx-auto p-4 md:p-8">
                {/* Presets */}
                <h2 className="font-bold text-xl mb-4">快速組合</h2>
                <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                   {Object.entries(PRESETS).map(([k,v])=><button key={k} onClick={()=>loadPreset(v)} className="p-4 bg-white border rounded-xl shadow-sm hover:border-blue-400 text-left"><div className="font-bold mb-1">{k}</div><div className="text-xs text-slate-400">{v.length} 動作</div></button>)}
                   {customPresets.map(p => (
                      <div key={p.id} className="relative group">
                         <button onClick={()=>loadCustomPreset(p)} className="w-full h-full p-4 bg-blue-50 border border-blue-100 rounded-xl text-left hover:border-blue-300"><div className="font-bold text-blue-900 mb-1">{p.name}</div><div className="text-xs text-blue-400">{p.items.length} 動作</div></button>
                         <button onClick={(e)=>{e.stopPropagation(); const newP=customPresets.filter(x=>x.id!==p.id); setCustomPresets(newP); localStorage.setItem('sculpt_custom_presets',JSON.stringify(newP));}} className="absolute top-2 right-2 opacity-0 group-hover:opacity-100 bg-white p-1 rounded text-red-500"><Icon name="trash-2" size={12}/></button>
                         <button onClick={(e)=>{e.stopPropagation(); copyToClip(generateHash(p.items)); showToast("已複製");}} className="absolute bottom-2 right-2 opacity-0 group-hover:opacity-100 bg-white p-1 rounded text-blue-500"><Icon name="copy" size={12}/></button>
                      </div>
                   ))}
                </div>
                {/* Filter */}
                <div className="flex overflow-x-auto gap-2 mb-6 pb-2 no-scrollbar sticky top-20 z-30 bg-slate-50/90 py-2">
                   {['全部', ...Object.values(MuscleGroup)].map(m=><button key={m} onClick={()=>setSelectedMuscle(m)} className={`px-4 py-2 rounded-full text-sm font-bold whitespace-nowrap transition ${selectedMuscle===m?'bg-slate-900 text-white':'bg-white border text-slate-500'}`}>{m}</button>)}
                </div>
                {/* Grid */}
                <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                   {filtered.map(ex => {
                      const cv = selectedVariants[ex.id] || ex.variants[0];
                      const imgs = ex.variantImages?.[cv] || ex.images;
                      return (
                         <div key={ex.id} className="bg-white rounded-2xl border shadow-sm hover:shadow-lg transition overflow-hidden group">
                            <div className="relative h-48 bg-slate-100">
                               <ExerciseIllustration name={ex.name} images={[imgs[0]]} className="w-full h-full" />
                               <button onClick={()=>setActiveInfoExercise(ex)} className="absolute top-2 right-2 p-2 bg-white/80 rounded-full hover:text-blue-600"><Icon name="info" size={16}/></button>
                            </div>
                            <div className="p-4">
                               <h3 className="font-bold mb-1">{ex.name}</h3>
                               <select value={cv} onChange={e=>setSelectedVariants({...selectedVariants, [ex.id]:e.target.value})} className="w-full text-sm bg-slate-50 border rounded px-2 py-1 mb-4">{ex.variants.map(v=><option key={v} value={v}>{v}</option>)}</select>
                               <button onClick={()=>{setPendingConfig({exercise:ex, variant:cv})}} className="w-full py-3 bg-slate-900 text-white rounded-xl font-bold flex justify-center gap-2 hover:bg-blue-600 transition"><Icon name="plus" size={18}/> 加入</button>
                            </div>
                         </div>
                      )
                   })}
                </div>
             </main>
             {/* Bottom Bar */}
             <div className="fixed bottom-0 w-full bg-white border-t p-4 flex gap-4 overflow-x-auto z-40 shadow-2xl">
                <div className="flex-1 flex gap-2 overflow-x-auto no-scrollbar items-center">
                   {myPlan.length===0 && <span className="text-slate-400 text-sm">選擇上方動作加入...</span>}
                   {myPlan.map(i=><div key={i.instanceId} className="shrink-0 bg-slate-50 border rounded-lg p-2 flex gap-2 items-center min-w-[120px]"><div className="text-xs"><b>{i.name}</b><br/>{i.weight}kg</div><button onClick={()=>setMyPlan(myPlan.filter(x=>x.instanceId!==i.instanceId))} className="text-slate-300 hover:text-red-500 ml-auto"><Icon name="trash-2" size={14}/></button></div>)}
                </div>
                <div className="flex gap-2 shrink-0">
                   {myPlan.length>0 && <><button onClick={()=>{copyToClip(generateHash(myPlan)); showToast("已複製")}} className="p-3 bg-slate-100 rounded-xl"><Icon name="share-2"/></button><button onClick={()=>setShowSavePresetModal(true)} className="p-3 bg-slate-100 rounded-xl"><Icon name="save"/></button></>}
                   <button disabled={myPlan.length===0} onClick={()=>setView('workout')} className="px-6 py-3 bg-blue-600 text-white font-bold rounded-xl disabled:opacity-50 flex items-center gap-2"><Icon name="play" fill="currentColor"/> 開始</button>
                </div>
             </div>

             {/* Overlays */}
             {toastMessage && <Toast/>}
             {activeInfoExercise && <InfoModal exercise={activeInfoExercise} onClose={()=>setActiveInfoExercise(null)} />}
             {pendingConfig && <PlanConfigModal/>}
             {showImportModal && <ImportModal/>}
             {showSavePresetModal && <div className="fixed inset-0 z-[70] flex items-center justify-center bg-black/50 backdrop-blur-sm px-4"><div className="bg-white p-6 rounded-2xl w-full max-w-sm"><h3 className="font-bold mb-4">儲存組合</h3><input id="pname" className="w-full border rounded p-2 mb-4" placeholder="名稱"/><div className="flex gap-2"><button onClick={()=>setShowSavePresetModal(false)} className="flex-1 py-2 text-slate-500">取消</button><button onClick={()=>{ const n=document.getElementById('pname').value; if(n){ setCustomPresets([...customPresets, {id:Date.now().toString(), name:n, items:myPlan}]); localStorage.setItem('sculpt_custom_presets', JSON.stringify([...customPresets, {id:Date.now().toString(), name:n, items:myPlan}])); setShowSavePresetModal(false); showToast("已儲存"); } }} className="flex-1 py-2 bg-blue-600 text-white rounded">儲存</button></div></div></div>}
          </div>
        );
      };

      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(<App />);
    </script>
  </body>
</html>